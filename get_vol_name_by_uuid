#include<stdio.h>
#include<string.h>
#define MAX_SHELL_STR_LEN 1024

int get_vol_name_by_uuid(char * uuid, char * o_vol_name)
{
    int i = 0;
    char cmd[MAX_SHELL_STR_LEN] = {0};
    FILE * file_temp = NULL;
    char parse_buf[256] = {0};
    char * str = NULL;
    char * strs[15] = {0};


    snprintf(cmd, MAX_SHELL_STR_LEN, "blkid | grep %s", uuid);
    file_temp = popen(cmd, "r");
    if (NULL == file_temp) {
        perror("pipe open failed");
        return -1;

    }

    if(NULL != fgets(parse_buf, 128, file_temp)) {
        str = parse_buf;
        while(NULL != (strs[i] = strtok(str,":"))){
            i++;
            str = NULL;
        }
        strcpy(o_vol_name, strs[0]);
        return 1;
    }
    return 0;
}


int main(int argc, char * argv[])
{
    char vol_name[10] = {0};

    get_vol_name_by_uuid(argv[1], vol_name);

    printf("vol_name:%s\n", vol_name);
}
